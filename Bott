from telegram import Update
from telegram.ext import CallbackContext

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
PRICE_BEFORE = 1

def get_photo(update: Update, context: CallbackContext):
    """
    –®–∞–≥ 1: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Ñ–æ—Ç–æ.
    –°–æ—Ö—Ä–∞–Ω—è–µ–º file_id —Ñ–æ—Ç–æ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —à–∞–≥ –≤–≤–æ–¥–∞ —Ü–µ–Ω—ã –î–û.
    """
    # –ï—Å–ª–∏ –≤–¥—Ä—É–≥ –µ—â–µ –Ω–µ—Ç —Ñ–ª–∞–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∫–∏–¥–∫–∏ ‚Äî —Å—Ç–∞–≤–∏–º –µ–≥–æ
    if "in_discount_flow" not in context.user_data:
        context.user_data["in_discount_flow"] = True

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ file_id –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ñ–æ—Ç–æ
    if update.message.photo:
        context.user_data["photo"] = update.message.photo[-1].file_id
    else:
        update.message.reply_text("‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Ç–æ–≤–∞—Ä–∞ —Å —Ü–µ–Ω–Ω–∏–∫–æ–º.")
        return PRICE_BEFORE  # –æ—Å—Ç–∞—ë–º—Å—è –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
    update.message.reply_text(
        "üí∞ –û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –î–û —Å–∫–∏–¥–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 100.0)."
    )

    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
    return PRICE_BEFORE
