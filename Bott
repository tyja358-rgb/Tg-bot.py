def currency(update: Update, context: CallbackContext):
    cur = update.message.text.strip().upper()

    if cur not in ("MDL", "EUR", "USD"):
        update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É –∫–Ω–æ–ø–∫–æ–π –Ω–∏–∂–µ üëá")
        return CURRENCY

    before = context.user_data["before"]
    after = context.user_data["after"]

    discount = (before - after) / before * 100

    # ‚ùó –ø—Ä–æ–≤–µ—Ä–∫–∞ 20%
    if discount < 20:
        update.message.reply_text(
            f"‚ùå –°–∫–∏–¥–∫–∞ {discount:.1f}%\n–ú–∏–Ω–∏–º—É–º ‚Äî 20%",
        )
        context.user_data.clear()
        return ConversationHandler.END

    context.user_data["currency"] = cur
    context.user_data["discount"] = discount

    update.message.reply_text(
        "üìç –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –º–∞–≥–∞–∑–∏–Ω–∞",
        reply_markup=ReplyKeyboardMarkup(
            [[KeyboardButton("üìç –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–æ–∫–∞—Ü–∏–µ–π", request_location=True)]],
            resize_keyboard=True,
            one_time_keyboard=True
        )
    )

    return LOCATION
