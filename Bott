def add_store_location(update, context):
    global stores
    loc = update.message.location
    if not loc:
        update.message.reply_text("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        return ADD_STORE_LOCATION

    coords = (loc.latitude, loc.longitude)
    address = geolocator.reverse(coords).address
    context.user_data["address"] = address  # —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∞–¥—Ä–µ—Å

    # üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ –Ω–∞ —ç—Ç–æ–º –∞–¥—Ä–µ—Å–µ
    existing_stores = [name for name, data in stores.items() if data["address"] == address]

    if existing_stores:
        keyboard = [[s] for s in sorted(existing_stores)]
        keyboard.append(["‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞"])
        update.message.reply_text(
            f"–ê–¥—Ä–µ—Å: {address}\nüè¨ –í—ã–±–µ—Ä–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π:",
            reply_markup=ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
        )
        return STORE_SELECT  # –∂–¥—ë–º –≤—ã–±–æ—Ä –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
    else:
        update.message.reply_text(
            f"–ê–¥—Ä–µ—Å: {address}\n‚úèÔ∏è –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞",
            reply_markup=ReplyKeyboardMarkup([["‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞"]], resize_keyboard=True)
        )
        return STORE_NAME  # –∂–¥—ë–º –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è
