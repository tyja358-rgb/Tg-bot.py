def add_store_location(update, context):
    global stores
    loc = update.message.location
    if not loc:
        update.message.reply_text("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        return ADD_STORE_LOCATION

    coords = (loc.latitude, loc.longitude)
    address = geolocator.reverse(coords).address
    context.user_data["address"] = address

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –º–∞–≥–∞–∑–∏–Ω—ã –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É
    existing_stores = [name for name, data in stores.items() if data["address"] == address]

    if existing_stores:
        keyboard = [[s] for s in sorted(existing_stores)]
        keyboard.append(["‚ûï –ù–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω"])  # –∫–Ω–æ–ø–∫–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
        update.message.reply_text(
            f"–ê–¥—Ä–µ—Å: {address}\nüè¨ –í—ã–±–µ—Ä–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π:",
            reply_markup=ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
        )
        return STORE_SELECT  # –∂–¥—ë–º –≤—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ –∏–ª–∏ ‚ûï –ù–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω
    else:
        # –ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ –Ω–µ—Ç ‚Äî —Å—Ä–∞–∑—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
        update.message.reply_text(
            f"–ê–¥—Ä–µ—Å: {address}\n‚úèÔ∏è –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞:",
        )
        return STORE_NAME
