from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import Updater, CommandHandler
from shops import get_conversation_handler
from db import init_db  # ÐµÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑˆÑŒ Ð‘Ð”

TOKEN = "Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð"

def start(update: Update, context):
    context.user_data.clear()
    keyboard = [["âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐºÐ¸Ð´ÐºÑƒ"]]
    update.message.reply_text(
        "Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ ðŸ‘‹",
        reply_markup=ReplyKeyboardMarkup(
            keyboard, resize_keyboard=True, one_time_keyboard=True
        )
    )

def main():
    print(">>> MAIN STARTED<<<")
    init_db()
    updater = Updater(TOKEN, use_context=True)
    dp = updater.dispatcher

    dp.add_handler(CommandHandler("start", start))
    dp.add_handler(get_conversation_handler())

    updater.start_polling()
    print(">>> POLLING START<<<")
    updater.idle()

if __name__ == "__main__":
    main()
